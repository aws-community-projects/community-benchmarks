import { quantile } from './utils';

describe('utility functions', () => {
  test('quantile', () => {
    expect(quantile([1, 2, 3, 4, 5, 1, 5], 0.5)).toBe(3);
    expect(quantile([3], 0.9)).toBe(3);
    expect(
      quantile([9.3, 4.3, 99.2, 4.4, 3, 22.11, 1, 0.2, 4, 16.234], 0.9)
    ).toBe(29.82);
    expect(
      quantile(
        [
          441.8189525604248, 471.3020324707031, 486.94682121276855,
          506.79469108581543, 511.1696720123291, 538.1577014923096,
          539.6251678466797, 546.394348144531, 560.4071617126465,
          568.1307315826416, 571.6254711151123, 586.7092609405518,
          589.9784564971924, 594.7906970977783, 607.1336269378662,
          607.9096794128418, 617.825984954834, 622.9848861694336,
          626.7504692077637, 644.719123840332, 644.9086666107178,
          645.4818248748779, 652.0977020263672, 654.2980670928955,
          654.5248031616211, 656.6259860992432, 659.9187850952148,
          660.8679294586182, 675.7457256317139, 690.1657581329346,
          706.8357467651367, 707.4589729309082, 713.7625217437744,
          721.7330932617188, 728.0936241149902, 732.0249080657959,
          733.3176136016846, 733.5102558135986, 760.5175971984863,
          766.4098739624023, 766.960620880127, 781.714677810669,
          786.3757610321045, 796.6403961181641, 797.2345352172852,
          800.5797863006592, 803.6303520202637, 805.7107925415039,
          815.6309127807617, 824.9530792236328, 837.1598720550537,
          839.4808769226074, 841.2432670593262, 844.7937965393066,
          859.3540191650391, 869.8716163635254, 881.3886642456055,
          892.7361965179443, 899.3852138519287, 901.1659622192383,
          902.0280838012695, 908.5800647735596, 910.8638763427734,
          911.7391109466553, 918.0004596710205, 920.1836585998535,
          940.669059753418, 941.0934448242188, 943.5162544250488,
          951.1804580688477, 952.8355598449707, 953.460693359375,
          954.0412425994873, 954.4839859008789, 957.5886726379395,
          969.3686962127686, 974.4775295257568, 979.2304039001465,
          990.9782409667969, 993.1857585906982, 994.842529296875,
          999.7787475585938, 1002.6595592498779, 1003.3853054046631,
          1011.1603736877441, 1015.9318447113037, 1018.8000202178955,
          1018.8076496124268, 1022.4103927612305, 1034.1947078704834,
          1039.870023727417, 1041.0776138305664, 1044.475793838501,
          1046.2889671325684, 1055.257797241211, 1059.6890449523926,
          1060.2006912231445, 1116.976022720337, 1281.2840938568115,
          2038.3009910583496,
        ],
        0.9
      )
    ).toBe(1034.76);
  });
  test('empty array', () => {
    expect(quantile([], 0.7)).toBe(0);
  });
});
